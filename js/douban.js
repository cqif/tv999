let defaultMovieTags=['热门','最新','经典','豆瓣高分','冷门佳片','华语','欧美','韩国','日本','动作','喜剧','爱情','科幻','悬疑','恐怖','治愈'];let defaultTvTags=['热门','美剧','英剧','韩剧','日剧','国产剧','港剧','日本动画','综艺','纪录片'];let movieTags=[];let tvTags=[];function loadUserTags(){try{const _0x154ddc=localStorage['getItem']('userMovieTags');const _0x3f0c10=localStorage['getItem']('userTvTags');if(_0x154ddc){movieTags=JSON['parse'](_0x154ddc);}else{movieTags=[...defaultMovieTags];}if(_0x3f0c10){tvTags=JSON['parse'](_0x3f0c10);}else{tvTags=[...defaultTvTags];}}catch(_0x4ed323){console['error']('加载标签失败：',_0x4ed323);movieTags=[...defaultMovieTags];tvTags=[...defaultTvTags];}}function saveUserTags(){try{localStorage['setItem']('userMovieTags',JSON['stringify'](movieTags));localStorage['setItem']('userTvTags',JSON['stringify'](tvTags));}catch(_0x38154c){console['error']('保存标签失败：',_0x38154c);showToast('保存标签失败','error');}}let doubanMovieTvCurrentSwitch='movie';let doubanCurrentTag='热门';let doubanPageStart=0x0;const doubanPageSize=0x10;function initDouban(){const _0x14887e=document['getElementById']('doubanToggle');if(_0x14887e){const _0x34d0bb=localStorage['getItem']('doubanEnabled')==='true';_0x14887e['checked']=_0x34d0bb;const _0x1b61c7=_0x14887e['nextElementSibling'];const _0x165a1f=_0x1b61c7['nextElementSibling'];if(_0x34d0bb){_0x1b61c7['classList']['add']('bg-pink-600');_0x165a1f['classList']['add']('translate-x-6');}_0x14887e['addEventListener']('change',function(_0x4db280){const _0x3d3d3c=_0x4db280['target']['checked'];localStorage['setItem']('doubanEnabled',_0x3d3d3c);if(_0x3d3d3c){_0x1b61c7['classList']['add']('bg-pink-600');_0x165a1f['classList']['add']('translate-x-6');}else{_0x1b61c7['classList']['remove']('bg-pink-600');_0x165a1f['classList']['remove']('translate-x-6');}updateDoubanVisibility();});updateDoubanVisibility();window['scrollTo'](0x0,0x0);}loadUserTags();renderDoubanMovieTvSwitch();renderDoubanTags();setupDoubanRefreshBtn();if(localStorage['getItem']('doubanEnabled')==='true'){renderRecommend(doubanCurrentTag,doubanPageSize,doubanPageStart);}}function updateDoubanVisibility(){const _0x374b88=document['getElementById']('doubanArea');if(!_0x374b88)return;const _0x40b097=localStorage['getItem']('doubanEnabled')==='true';const _0x3433a1=document['getElementById']('resultsArea')&&!document['getElementById']('resultsArea')['classList']['contains']('hidden');if(_0x40b097&&!_0x3433a1){_0x374b88['classList']['remove']('hidden');if(document['getElementById']('douban-results')['children']['length']===0x0){renderRecommend(doubanCurrentTag,doubanPageSize,doubanPageStart);}}else{_0x374b88['classList']['add']('hidden');}}function fillSearchInput(_0x5e9587){if(!_0x5e9587)return;const _0x44ef72=_0x5e9587['replace'](/</g,'&lt;')['replace'](/>/g,'&gt;')['replace'](/"/g,'&quot;');const _0x35e48d=document['getElementById']('searchInput');if(_0x35e48d){_0x35e48d['value']=_0x44ef72;_0x35e48d['focus']();showToast('已填充搜索内容，点击搜索按钮开始搜索','info');}}function fillAndSearch(_0x1095f0){if(!_0x1095f0)return;const _0x4b730b=_0x1095f0['replace'](/</g,'&lt;')['replace'](/>/g,'&gt;')['replace'](/"/g,'&quot;');const _0x42d6de=document['getElementById']('searchInput');if(_0x42d6de){_0x42d6de['value']=_0x4b730b;search();}}function fillAndSearchWithDouban(_0x153ce6){if(!_0x153ce6)return;const _0x440196=_0x153ce6['replace'](/</g,'&lt;')['replace'](/>/g,'&gt;')['replace'](/"/g,'&quot;');if(typeof selectedAPIs!=='undefined'&&!selectedAPIs['includes']('dbzy')){const _0x413b32=document['querySelector']('input[id=\x22api_dbzy\x22]');if(_0x413b32){_0x413b32['checked']=!![];if(typeof updateSelectedAPIs==='function'){updateSelectedAPIs();}else{selectedAPIs['push']('dbzy');localStorage['setItem']('selectedAPIs',JSON['stringify'](selectedAPIs));const _0x5d2587=document['getElementById']('selectedAPICount');if(_0x5d2587){_0x5d2587['textContent']=selectedAPIs['length'];}}showToast('已自动选择豆瓣资源API','info');}}const _0x517adb=document['getElementById']('searchInput');if(_0x517adb){_0x517adb['value']=_0x440196;search();}}function renderDoubanMovieTvSwitch(){const _0x431180=document['getElementById']('douban-movie-toggle');const _0x13140a=document['getElementById']('douban-tv-toggle');if(!_0x431180||!_0x13140a)return;_0x431180['addEventListener']('click',function(){if(doubanMovieTvCurrentSwitch!=='movie'){_0x431180['classList']['add']('bg-pink-600','text-white');_0x431180['classList']['remove']('text-gray-300');_0x13140a['classList']['remove']('bg-pink-600','text-white');_0x13140a['classList']['add']('text-gray-300');doubanMovieTvCurrentSwitch='movie';doubanCurrentTag='热门';renderDoubanTags(movieTags);setupDoubanRefreshBtn();if(localStorage['getItem']('doubanEnabled')==='true'){renderRecommend(doubanCurrentTag,doubanPageSize,doubanPageStart);}}});_0x13140a['addEventListener']('click',function(){if(doubanMovieTvCurrentSwitch!=='tv'){_0x13140a['classList']['add']('bg-pink-600','text-white');_0x13140a['classList']['remove']('text-gray-300');_0x431180['classList']['remove']('bg-pink-600','text-white');_0x431180['classList']['add']('text-gray-300');doubanMovieTvCurrentSwitch='tv';doubanCurrentTag='热门';renderDoubanTags(tvTags);setupDoubanRefreshBtn();if(localStorage['getItem']('doubanEnabled')==='true'){renderRecommend(doubanCurrentTag,doubanPageSize,doubanPageStart);}}});}function renderDoubanTags(_0x4f2755){const _0x13e8cb=document['getElementById']('douban-tags');if(!_0x13e8cb)return;const _0xac7102=doubanMovieTvCurrentSwitch==='movie'?movieTags:tvTags;_0x13e8cb['innerHTML']='';const _0x2f04b6=document['createElement']('button');_0x2f04b6['className']='py-1.5\x20px-3.5\x20rounded\x20text-sm\x20font-medium\x20transition-all\x20duration-300\x20bg-[#1a1a1a]\x20text-gray-300\x20hover:bg-pink-700\x20hover:text-white';_0x2f04b6['innerHTML']='<span\x20class=\x22flex\x20items-center\x22><svg\x20class=\x22w-3\x20h-3\x20mr-1\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20viewBox=\x220\x200\x2024\x2024\x22><path\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20stroke-width=\x222\x22\x20d=\x22M12\x206v6m0\x200v6m0-6h6m-6\x200H6\x22></path></svg>管理标签</span>';_0x2f04b6['onclick']=function(){showTagManageModal();};_0x13e8cb['appendChild'](_0x2f04b6);_0xac7102['forEach'](_0x50dbb9=>{const _0x29923c=document['createElement']('button');let _0x1d7d26='py-1.5\x20px-3.5\x20rounded\x20text-sm\x20font-medium\x20transition-all\x20duration-300\x20';if(_0x50dbb9===doubanCurrentTag){_0x1d7d26+='bg-pink-600\x20text-white\x20shadow-md';}else{_0x1d7d26+='bg-[#1a1a1a]\x20text-gray-300\x20hover:bg-pink-700\x20hover:text-white';}_0x29923c['className']=_0x1d7d26;_0x29923c['textContent']=_0x50dbb9;_0x29923c['onclick']=function(){if(doubanCurrentTag!==_0x50dbb9){doubanCurrentTag=_0x50dbb9;doubanPageStart=0x0;renderRecommend(doubanCurrentTag,doubanPageSize,doubanPageStart);renderDoubanTags();}};_0x13e8cb['appendChild'](_0x29923c);});}function setupDoubanRefreshBtn(){const _0x17431d=document['getElementById']('douban-refresh');if(!_0x17431d)return;_0x17431d['onclick']=function(){doubanPageStart+=doubanPageSize;if(doubanPageStart>0x9*doubanPageSize){doubanPageStart=0x0;}renderRecommend(doubanCurrentTag,doubanPageSize,doubanPageStart);};}function fetchDoubanTags(){const _0x461dc6='https://movie.douban.com/j/search_tags?type=movie';fetchDoubanData(_0x461dc6)['then'](_0x180ad7=>{movieTags=_0x180ad7['tags'];if(doubanMovieTvCurrentSwitch==='movie'){renderDoubanTags(movieTags);}})['catch'](_0x54dbeb=>{console['error']('获取豆瓣热门电影标签失败：',_0x54dbeb);});const _0x50b163='https://movie.douban.com/j/search_tags?type=tv';fetchDoubanData(_0x50b163)['then'](_0x31006e=>{tvTags=_0x31006e['tags'];if(doubanMovieTvCurrentSwitch==='tv'){renderDoubanTags(tvTags);}})['catch'](_0x2c2a43=>{console['error']('获取豆瓣热门电视剧标签失败：',_0x2c2a43);});}function renderRecommend(_0x1d71ae,_0x1595d9,_0x1ca737){const _0x5b38ae=document['getElementById']('douban-results');if(!_0x5b38ae)return;const _0x4f4457=document['createElement']('div');_0x4f4457['classList']['add']('absolute','inset-0','bg-gray-100','bg-opacity-75','flex','items-center','justify-center','z-10');const _0x3ab723=document['createElement']('div');_0x3ab723['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-6\x20h-6\x20border-2\x20border-pink-500\x20border-t-transparent\x20rounded-full\x20animate-spin\x20inline-block\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-pink-500\x20ml-4\x22>加载中...</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';_0x4f4457['appendChild'](_0x3ab723);_0x5b38ae['classList']['add']('relative');_0x5b38ae['appendChild'](_0x4f4457);const _0x11f803='https://movie.douban.com/j/search_subjects?type='+doubanMovieTvCurrentSwitch+'&tag='+_0x1d71ae+'&sort=recommend&page_limit='+_0x1595d9+'&page_start='+_0x1ca737;fetchDoubanData(_0x11f803)['then'](_0x140670=>{renderDoubanCards(_0x140670,_0x5b38ae);})['catch'](_0x8bcddb=>{console['error']('获取豆瓣数据失败：',_0x8bcddb);_0x5b38ae['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22col-span-full\x20text-center\x20py-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-red-400\x22>❌\x20获取豆瓣数据失败，请稍后重试</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-gray-500\x20text-sm\x20mt-2\x22>提示：使用VPN可能有助于解决此问题</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';});}async function fetchDoubanData(_0x2f0632){const _0x5d867e=new AbortController();const _0x6c19cb=setTimeout(()=>_0x5d867e['abort'](),0x2710);const _0x214b51={'signal':_0x5d867e['signal'],'headers':{'User-Agent':'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/121.0.0.0\x20Safari/537.36','Referer':'https://movie.douban.com/','Accept':'application/json,\x20text/plain,\x20*/*'}};try{const _0x21ec45=await fetch(PROXY_URL+encodeURIComponent(_0x2f0632),_0x214b51);clearTimeout(_0x6c19cb);if(!_0x21ec45['ok']){throw new Error('HTTP\x20error!\x20Status:\x20'+_0x21ec45['status']);}return await _0x21ec45['json']();}catch(_0x56b859){console['error']('豆瓣\x20API\x20请求失败（直接代理）：',_0x56b859);const _0x583870='https://api.allorigins.win/get?url='+encodeURIComponent(_0x2f0632);try{const _0x29693e=await fetch(_0x583870);if(!_0x29693e['ok']){throw new Error('备用API请求失败!\x20状态:\x20'+_0x29693e['status']);}const _0x1ead5d=await _0x29693e['json']();if(_0x1ead5d&&_0x1ead5d['contents']){return JSON['parse'](_0x1ead5d['contents']);}else{throw new Error('无法获取有效数据');}}catch(_0x553b5b){console['error']('豆瓣\x20API\x20备用请求也失败：',_0x553b5b);throw _0x553b5b;}}}function renderDoubanCards(_0x5c46ea,_0x31a09e){const _0x2b683a=document['createDocumentFragment']();if(!_0x5c46ea['subjects']||_0x5c46ea['subjects']['length']===0x0){const _0x530fbd=document['createElement']('div');_0x530fbd['className']='col-span-full\x20text-center\x20py-8';_0x530fbd['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-pink-500\x22>❌\x20暂无数据，请尝试其他分类或刷新</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';_0x2b683a['appendChild'](_0x530fbd);}else{_0x5c46ea['subjects']['forEach'](_0x11075b=>{const _0x1103a9=document['createElement']('div');_0x1103a9['className']='bg-[#111]\x20hover:bg-[#222]\x20transition-all\x20duration-300\x20rounded-lg\x20overflow-hidden\x20flex\x20flex-col\x20transform\x20hover:scale-105\x20shadow-md\x20hover:shadow-lg';const _0x36cc9c=_0x11075b['title']['replace'](/</g,'&lt;')['replace'](/>/g,'&gt;')['replace'](/"/g,'&quot;');const _0x30c7e1=(_0x11075b['rate']||'暂无')['replace'](/</g,'&lt;')['replace'](/>/g,'&gt;');const _0xde2660=_0x11075b['cover'];const _0x436256=PROXY_URL+encodeURIComponent(_0xde2660);_0x1103a9['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22relative\x20w-full\x20aspect-[2/3]\x20overflow-hidden\x20cursor-pointer\x22\x20onclick=\x22fillAndSearchWithDouban(\x27'+_0x36cc9c+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0xde2660+'\x22\x20alt=\x22'+_0x36cc9c+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22w-full\x20h-full\x20object-cover\x20transition-transform\x20duration-500\x20hover:scale-110\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.onerror=null;\x20this.src=\x27'+_0x436256+'\x27;\x20this.classList.add(\x27object-contain\x27);\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20loading=\x22lazy\x22\x20referrerpolicy=\x22no-referrer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22absolute\x20inset-0\x20bg-gradient-to-t\x20from-black\x20to-transparent\x20opacity-60\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22absolute\x20bottom-2\x20left-2\x20bg-black/70\x20text-white\x20text-xs\x20px-2\x20py-1\x20rounded-sm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-yellow-400\x22>★</span>\x20'+_0x30c7e1+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22absolute\x20bottom-2\x20right-2\x20bg-black/70\x20text-white\x20text-xs\x20px-2\x20py-1\x20rounded-sm\x20hover:bg-[#333]\x20transition-colors\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x11075b['url']+'\x22\x20target=\x22_blank\x22\x20rel=\x22noopener\x20noreferrer\x22\x20title=\x22在豆瓣查看\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20🔗\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22p-2\x20text-center\x20bg-[#111]\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22fillAndSearchWithDouban(\x27'+_0x36cc9c+'\x27)\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22text-sm\x20font-medium\x20text-white\x20truncate\x20w-full\x20hover:text-pink-400\x20transition\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x36cc9c+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x36cc9c+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';_0x2b683a['appendChild'](_0x1103a9);});}_0x31a09e['innerHTML']='';_0x31a09e['appendChild'](_0x2b683a);}function resetToHome(){resetSearchArea();updateDoubanVisibility();}document['addEventListener']('DOMContentLoaded',initDouban);function showTagManageModal(){let _0x3d87de=document['getElementById']('tagManageModal');if(_0x3d87de){document['body']['removeChild'](_0x3d87de);}_0x3d87de=document['createElement']('div');_0x3d87de['id']='tagManageModal';_0x3d87de['className']='fixed\x20inset-0\x20bg-black\x20bg-opacity-75\x20flex\x20items-center\x20justify-center\x20z-40';const _0x4f7364=doubanMovieTvCurrentSwitch==='movie';const _0x4e1383=_0x4f7364?movieTags:tvTags;const _0xb1956f=_0x4f7364?defaultMovieTags:defaultTvTags;_0x3d87de['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-[#191919]\x20rounded-lg\x20p-6\x20max-w-md\x20w-full\x20max-h-[90vh]\x20overflow-y-auto\x20relative\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeTagModal\x22\x20class=\x22absolute\x20top-4\x20right-4\x20text-gray-400\x20hover:text-white\x20text-xl\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-xl\x20font-bold\x20text-white\x20mb-4\x22>标签管理\x20('+(_0x4f7364?'电影':'电视剧')+')</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mb-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20items-center\x20mb-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22text-lg\x20font-medium\x20text-gray-300\x22>标签列表</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22resetTagsBtn\x22\x20class=\x22text-xs\x20px-2\x20py-1\x20bg-gray-700\x20hover:bg-gray-600\x20text-white\x20rounded\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20恢复默认标签\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22grid\x20grid-cols-2\x20sm:grid-cols-3\x20gap-2\x20mb-4\x22\x20id=\x22tagsGrid\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4e1383['length']?_0x4e1383['map'](_0x249370=>{const _0x182dc8=_0x249370!=='热门';return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-[#1a1a1a]\x20text-gray-300\x20py-1.5\x20px-3\x20rounded\x20text-sm\x20font-medium\x20flex\x20justify-between\x20items-center\x20group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x249370+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x182dc8?'<button\x20class=\x22delete-tag-btn\x20text-gray-500\x20hover:text-red-500\x20opacity-0\x20group-hover:opacity-100\x20transition-opacity\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data-tag=\x22'+_0x249370+'\x22>✕</button>':'<span\x20class=\x22text-gray-500\x20text-xs\x20italic\x20opacity-0\x20group-hover:opacity-100\x22>必需</span>')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';})['join'](''):'<div\x20class=\x22col-span-full\x20text-center\x20py-4\x20text-gray-500\x22>无标签，请添加或恢复默认</div>')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22border-t\x20border-gray-700\x20pt-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22text-lg\x20font-medium\x20text-gray-300\x20mb-3\x22>添加新标签</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addTagForm\x22\x20class=\x22flex\x20items-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22newTagInput\x22\x20placeholder=\x22输入标签名称...\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22flex-1\x20bg-[#222]\x20text-white\x20border\x20border-gray-700\x20rounded\x20px-3\x20py-2\x20focus:outline-none\x20focus:border-pink-500\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22ml-2\x20bg-pink-600\x20hover:bg-pink-700\x20text-white\x20px-4\x20py-2\x20rounded\x22>添加</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-gray-500\x20mt-2\x22>提示：标签名称不能为空，不能重复，不能包含特殊字符</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';document['body']['appendChild'](_0x3d87de);setTimeout(()=>{document['getElementById']('newTagInput')['focus']();},0x64);document['getElementById']('closeTagModal')['addEventListener']('click',function(){document['body']['removeChild'](_0x3d87de);});_0x3d87de['addEventListener']('click',function(_0x495710){if(_0x495710['target']===_0x3d87de){document['body']['removeChild'](_0x3d87de);}});document['getElementById']('resetTagsBtn')['addEventListener']('click',function(){resetTagsToDefault();showTagManageModal();});const _0x55af62=document['querySelectorAll']('.delete-tag-btn');_0x55af62['forEach'](_0x2e7681=>{_0x2e7681['addEventListener']('click',function(){const _0xe4fa66=this['getAttribute']('data-tag');deleteTag(_0xe4fa66);showTagManageModal();});});document['getElementById']('addTagForm')['addEventListener']('submit',function(_0x21d09d){_0x21d09d['preventDefault']();const _0xc1b378=document['getElementById']('newTagInput');const _0x1bdc18=_0xc1b378['value']['trim']();if(_0x1bdc18){addTag(_0x1bdc18);_0xc1b378['value']='';showTagManageModal();}});}function addTag(_0x312590){const _0x5653f3=_0x312590['replace'](/</g,'&lt;')['replace'](/>/g,'&gt;')['replace'](/"/g,'&quot;');const _0x1e4b75=doubanMovieTvCurrentSwitch==='movie';const _0x57671a=_0x1e4b75?movieTags:tvTags;const _0x4cac9c=_0x57671a['some'](_0x430cf9=>_0x430cf9['toLowerCase']()===_0x5653f3['toLowerCase']());if(_0x4cac9c){showToast('标签已存在','warning');return;}if(_0x1e4b75){movieTags['push'](_0x5653f3);}else{tvTags['push'](_0x5653f3);}saveUserTags();renderDoubanTags();showToast('标签添加成功','success');}function deleteTag(_0x44796c){if(_0x44796c==='热门'){showToast('热门标签不能删除','warning');return;}const _0x13f9cf=doubanMovieTvCurrentSwitch==='movie';const _0x167ddf=_0x13f9cf?movieTags:tvTags;const _0x2e6473=_0x167ddf['indexOf'](_0x44796c);if(_0x2e6473!==-0x1){_0x167ddf['splice'](_0x2e6473,0x1);saveUserTags();if(doubanCurrentTag===_0x44796c){doubanCurrentTag='热门';doubanPageStart=0x0;renderRecommend(doubanCurrentTag,doubanPageSize,doubanPageStart);}renderDoubanTags();showToast('标签删除成功','success');}}function resetTagsToDefault(){const _0x36a5c3=doubanMovieTvCurrentSwitch==='movie';if(_0x36a5c3){movieTags=[...defaultMovieTags];}else{tvTags=[...defaultTvTags];}doubanCurrentTag='热门';doubanPageStart=0x0;saveUserTags();renderDoubanTags();renderRecommend(doubanCurrentTag,doubanPageSize,doubanPageStart);showToast('已恢复默认标签','success');}